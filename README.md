<html><head><title>Scraper Documentation</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_g2tql22v7ju-3>li:before{content:"\0025cf  "}.lst-kix_49tebd6fgwoa-1>li:before{content:"\0025cb  "}.lst-kix_hum8hxgg5rxf-7>li:before{content:"\0025cb  "}.lst-kix_49tebd6fgwoa-4>li:before{content:"\0025cb  "}.lst-kix_hum8hxgg5rxf-2>li:before{content:"\0025a0  "}ul.lst-kix_49tebd6fgwoa-8{list-style-type:none}.lst-kix_hum8hxgg5rxf-0>li:before{content:"\0025cf  "}.lst-kix_4tdagisqdy4o-2>li:before{content:"\0025a0  "}ul.lst-kix_49tebd6fgwoa-7{list-style-type:none}ul.lst-kix_g2tql22v7ju-6{list-style-type:none}ul.lst-kix_49tebd6fgwoa-5{list-style-type:none}ul.lst-kix_49tebd6fgwoa-6{list-style-type:none}ul.lst-kix_g2tql22v7ju-5{list-style-type:none}ul.lst-kix_g2tql22v7ju-8{list-style-type:none}ul.lst-kix_49tebd6fgwoa-3{list-style-type:none}ul.lst-kix_g2tql22v7ju-7{list-style-type:none}ul.lst-kix_49tebd6fgwoa-4{list-style-type:none}ul.lst-kix_49tebd6fgwoa-1{list-style-type:none}ul.lst-kix_g2tql22v7ju-2{list-style-type:none}ul.lst-kix_49tebd6fgwoa-2{list-style-type:none}ul.lst-kix_g2tql22v7ju-1{list-style-type:none}.lst-kix_hum8hxgg5rxf-4>li:before{content:"\0025cb  "}ul.lst-kix_g2tql22v7ju-4{list-style-type:none}ul.lst-kix_49tebd6fgwoa-0{list-style-type:none}ul.lst-kix_g2tql22v7ju-3{list-style-type:none}.lst-kix_hum8hxgg5rxf-3>li:before{content:"\0025cf  "}ul.lst-kix_g2tql22v7ju-0{list-style-type:none}.lst-kix_g2tql22v7ju-1>li:before{content:"\0025cb  "}.lst-kix_49tebd6fgwoa-3>li:before{content:"\0025cf  "}.lst-kix_4tdagisqdy4o-1>li:before{content:"\0025cb  "}.lst-kix_4tdagisqdy4o-8>li:before{content:"\0025a0  "}.lst-kix_49tebd6fgwoa-2>li:before{content:"\0025a0  "}.lst-kix_4tdagisqdy4o-4>li:before{content:"\0025cb  "}.lst-kix_4tdagisqdy4o-5>li:before{content:"\0025a0  "}.lst-kix_g2tql22v7ju-8>li:before{content:"\0025a0  "}.lst-kix_49tebd6fgwoa-8>li:before{content:"\0025a0  "}.lst-kix_4tdagisqdy4o-3>li:before{content:"\0025cf  "}.lst-kix_49tebd6fgwoa-6>li:before{content:"\0025cf  "}ul.lst-kix_4tdagisqdy4o-4{list-style-type:none}.lst-kix_4tdagisqdy4o-6>li:before{content:"\0025cf  "}ul.lst-kix_4tdagisqdy4o-5{list-style-type:none}ul.lst-kix_4tdagisqdy4o-6{list-style-type:none}ul.lst-kix_4tdagisqdy4o-7{list-style-type:none}.lst-kix_hum8hxgg5rxf-8>li:before{content:"\0025a0  "}ul.lst-kix_4tdagisqdy4o-8{list-style-type:none}.lst-kix_g2tql22v7ju-2>li:before{content:"\0025a0  "}.lst-kix_49tebd6fgwoa-5>li:before{content:"\0025a0  "}ul.lst-kix_4tdagisqdy4o-1{list-style-type:none}ul.lst-kix_4tdagisqdy4o-0{list-style-type:none}.lst-kix_4tdagisqdy4o-7>li:before{content:"\0025cb  "}ul.lst-kix_4tdagisqdy4o-3{list-style-type:none}ul.lst-kix_4tdagisqdy4o-2{list-style-type:none}.lst-kix_g2tql22v7ju-4>li:before{content:"\0025cb  "}ul.lst-kix_hum8hxgg5rxf-6{list-style-type:none}.lst-kix_g2tql22v7ju-5>li:before{content:"\0025a0  "}ul.lst-kix_hum8hxgg5rxf-7{list-style-type:none}ul.lst-kix_hum8hxgg5rxf-8{list-style-type:none}.lst-kix_g2tql22v7ju-6>li:before{content:"\0025cf  "}ul.lst-kix_hum8hxgg5rxf-2{list-style-type:none}.lst-kix_49tebd6fgwoa-0>li:before{content:"\0025cf  "}.lst-kix_g2tql22v7ju-0>li:before{content:"\0025cf  "}ul.lst-kix_hum8hxgg5rxf-3{list-style-type:none}ul.lst-kix_hum8hxgg5rxf-4{list-style-type:none}.lst-kix_4tdagisqdy4o-0>li:before{content:"\0025cf  "}ul.lst-kix_hum8hxgg5rxf-5{list-style-type:none}.lst-kix_hum8hxgg5rxf-5>li:before{content:"\0025a0  "}.lst-kix_hum8hxgg5rxf-6>li:before{content:"\0025cf  "}ul.lst-kix_hum8hxgg5rxf-0{list-style-type:none}ul.lst-kix_hum8hxgg5rxf-1{list-style-type:none}.lst-kix_hum8hxgg5rxf-1>li:before{content:"\0025cb  "}.lst-kix_g2tql22v7ju-7>li:before{content:"\0025cb  "}.lst-kix_49tebd6fgwoa-7>li:before{content:"\0025cb  "}ol{margin:0;padding:0}.c16{color:#666666;font-size:12pt;font-family:"Trebuchet MS"}.c14{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c1{padding-left:0pt;direction:ltr;margin-left:72pt}.c9{padding-left:0pt;margin-left:144pt}.c10{color:inherit;text-decoration:inherit}.c8{padding-left:0pt;margin-left:108pt}.c0{color:#1155cc;text-decoration:underline}.c13{padding-left:0pt;margin-left:180pt}.c4{margin:0;padding:0}.c5{padding-left:0pt;margin-left:36pt}.c3{height:11pt}.c6{font-family:"Courier New"}.c7{font-size:10pt}.c11{text-indent:36pt}.c15{margin-left:72pt}.c2{direction:ltr}.c12{font-weight:bold}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c14"><h2 class="c2"><a name="h.11lgibetti5s"></a><span>Brookwood Web Crawler Documentation</span></h2><p class="c2"><span>Ryan Mitchell</span></p><p class="c2"><span>11/14/2013</span></p><h3 class="c2"><a name="h.m2sehm6jjl80"></a><span>Setting up your server</span></h3><p class="c2"><span>It is recommended that you download WAMP (Windows only, </span><span class="c0"><a class="c10" href="http://www.wampserver.com/en/">http://www.wampserver.com/en/</a></span><span>), or MAMP (Mac only, </span><span class="c0"><a class="c10" href="http://www.mamp.info/en/downloads/">http://www.mamp.info/en/downloads/</a></span><span>) in order to set up an Apache server with MySQL database, capable of executing PHP (this PHP capability is necessary for the front end search page) </span></p><p class="c3 c2"><span></span></p><h3 class="c2"><a name="h.3732eaqh5uo6"></a><span>Setting up the database</span></h3><p class="c3 c2"><span></span></p><p class="c2"><span>The following directions are with WAMP only, not MAMP, although the directions are very similar with MAMP and differ only in things like the location of phpmyadmin, root passwords, etc.:</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Open up phpmyadmin (should be at </span><span class="c0"><a class="c10" href="http://localhost/phpmyadmin/">http://localhost/phpmyadmin/</a></span><span>) and login using:</span></p><p class="c2"><span>u: root</span></p><p class="c2"><span>p: (empty password, just hit enter) </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Create a new database, Brookwood</span></p><p class="c2"><span>Create a new table, called &ldquo;data,&rdquo; using the data.sql file. Either click on &ldquo;Import&rdquo; to import a database from a .sql file, or open data.sql and copy/paste the file into the &ldquo;SQL&rdquo; tab in phpmyadmin</span></p><p class="c2"><span>Setting up the data table is necessary for the scrapers to operate. </span></p><h3 class="c2"><a name="h.hvc6v3aroqb"></a><span>Installing Java</span></h3><p class="c2"><span>Although you might be able to view Java apps in your browser, or run some compiled Java code, the Java Developers Kit is required to modify, compile, and run code that is not a Java executable (like these scrapers). Fortunately, the JDK is straightforward to install: </span><span class="c0"><a class="c10" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a></span><span>&nbsp;</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>After the JDK is installed, you should be able to code, compile, and run Java files. </span></p><h3 class="c2"><a name="h.4r9brjd8wg28"></a><span>Add Database Information to Code</span></h3><p class="c2"><span>There are two places where the code needs to be told where the MySQL database is, and what the database credentials are: </span></p><p class="c2"><span>In the Website.java file and in businessSearch.php</span></p><p class="c2"><span>There are four lines in Website.java that read:</span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String dbURL = &quot;jdbc:mysql://localhost:3306/brookwood&quot;;</span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Properties connectionProps = new Properties();</span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectionProps.put(&quot;user&quot;, &quot;root&quot;);</span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectionProps.put(&quot;password&quot;, &quot;&quot;);</span></p><p class="c2"><span>These settings should be correct if you are using the default settings for WAMP, and have created the brookwood database. However, if any of the settings have changed, update them here. (Server is localhost, port is 3306, database is brookwood, username is root, password is the blank string)</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Similarly, the line in businessSearch.php may also need to be modified:</span></p><p class="c2"><span class="c6">$con=mysqli_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;&quot;,&quot;brookwood&quot;);</span></p><p class="c3 c2"><span class="c6"></span></p><p class="c2"><span>Note that, if you are not using Eclipse to modify the Java code, you will need to recompile the code before you can run it. This is tricky to do from the command line -- it is recommended that you use Eclipse (installation and setup instructions are in this document) if you plan on modifying the code. </span></p><p class="c3 c2"><span></span></p><h3 class="c2"><a name="h.3y1ituibevom"></a><span>Java File Overview</span></h3><p class="c2"><span>The file structure of Brookwood.zip is as follows:</span></p><ul class="c4 lst-kix_g2tql22v7ju-0 start"><li class="c5 c2"><span>Brookwood</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-1 start"><li class="c1"><span>bin</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-2 start"><li class="c8 c2"><span>com</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-3 start"><li class="c9 c2"><span>bfplp</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-4 start"><li class="c13 c2"><span>Crawler.class</span></li><li class="c2 c13"><span>Website.class</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-1"><li class="c1"><span>lib</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-2"><li class="c2 c8"><span>htmlunit</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-3"><li class="c9 c2"><span>various files</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-2"><li class="c8 c2"><span>jsoup-1.7.2.jar</span></li><li class="c8 c2"><span>junit-4.11.jar</span></li><li class="c8 c2"><span>mysql-connector-java-5.1.25-bin.jar</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-1"><li class="c1"><span>src</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-2"><li class="c8 c2"><span>com</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-3"><li class="c2 c9"><span>bfplp</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-4"><li class="c13 c2"><span>Crawler.java</span></li><li class="c13 c2"><span>Website.java</span></li></ul><ul class="c4 lst-kix_g2tql22v7ju-1"><li class="c1"><span>.classpath</span></li><li class="c1"><span>.project</span></li></ul><p class="c3 c2"><span></span></p><p class="c2"><span>All the Java files are in the package &ldquo;com.bfplp&rdquo; (this is following the convention of using the company&rsquo;s domain name backwards) and so are stored under the folders bin/com/bfplp (the compiled code) and src/com/bfplp (the uncompiled, editable, source code)</span></p><p class="c3 c2"><span></span></p><h4 class="c2"><a name="h.6xc0o1jjy3ej"></a><span>Website.java:</span></h4><p class="c2"><span>Website.java is where the magic happens. This is the code for a &ldquo;Website&rdquo; object that takes a String argument that determines which website will be scraped. For example: </span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Website bizbuysellcom = new Website(&quot;bizbuysellcom&quot;);</span></p><p class="c2"><span class="c6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bizbuysellcom.start();</span></p><p class="c2"><span>creates a new Website &ldquo;bizbuysellcom,&rdquo; and then calls the &ldquo;start()&rdquo; method on it to begin scraping. </span></p><p class="c2"><span>Website&rsquo;s start() method creates a database connection using the MySQL credentials supplied, and then calls the correct scraping method based on the String that was passed to it. In our example, it would call the method &ldquo;bizbuysellcom()&rdquo;</span></p><p class="c2"><span>This method loads the search page at </span><span class="c0"><a class="c10" href="http://www.bizbuysell.com/alabama-businesses-for-sale/1/">http://www.bizbuysell.com/alabama-businesses-for-sale/1/</a></span><span>&nbsp;and proceeds to crawl all the business listing pages found on it. Every time it gathers the information for a business listing page, it adds it to the database using the writeToDB() method.</span></p><h4 class="c2"><a name="h.sjm0h71p7snt"></a><span>Crawler.java:</span></h4><p class="c2"><span>Crawler.java contains a sample implementation that creates two &ldquo;Website&rdquo; objects, one for bizbuysellcom, one for bizquestcom, and calls the start() method on both. Whenever you want to start crawling a website, you run Crawler, don&rsquo;t call Website directly.</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>All the files under /lib are required library files, used for things like connecting to the MySQL database, parsing websites, and connecting to websites. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span class="c12 c16">Running Java Files</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>There are two ways to run the scrapers: </span></p><p class="c2"><span class="c12">First (recommended):</span><span>&nbsp;Install Eclipse: </span><span class="c0"><a class="c10" href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a></span><span>&nbsp;(Windows) </span><span class="c0"><a class="c10" href="http://www.eclipse.org/downloads/?osType=macosx&amp;release=undefined">http://www.eclipse.org/downloads/?osType=macosx&amp;release=undefined</a></span><span>&nbsp;(Mac) Choose the first download on the page, Eclipse Standard, either 32 bit or 64 bit</span></p><p class="c2"><span>After installing and opening Eclipse, it will prompt you to choose a workspace. I usually use a folder like /My Documents/workspace, but it doesn&rsquo;t matter which folder you select. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>File &rarr; New &rarr; Project</span></p><p class="c2"><span>Select &ldquo;Java Project&rdquo;</span></p><p class="c2"><span>Enter &ldquo;Brookwood&rdquo; as the project name</span></p><p class="c2"><span>Click &ldquo;finish&rdquo; </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>While the new project &ldquo;Brookwood&rdquo; is highlighted in the Package Explorer, go to File &rarr; New &rarr; Package</span></p><p class="c2"><span>The source folder should be the default &ldquo;Brookwood/src&rdquo;</span></p><p class="c2"><span>Type &ldquo;com.bfplp&rdquo; as the package name</span></p><p class="c2"><span>Click &ldquo;finish&rdquo; </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Now, if you navigate to your &ldquo;workspace&rdquo; folder in the file explorer, you should see the new folder &ldquo;Brookwood&rdquo; created, containing various subfolders. Drag the folders &ldquo;lib,&rdquo; &ldquo;src,&rdquo; and &ldquo;bin&rdquo; over from the existing Brookwood zipped java code file, into your newly-created Brookwood folder in the workspace. Replace the existing src and bin folders. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Go back to Eclipse, right-click on the &ldquo;Brookwood&rdquo; project in the file explorer, and click &ldquo;Refresh&rdquo;</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>If you see a lot of errors, that&rsquo;s fine. The errors are occuring because Eclipse doesn&rsquo;t &ldquo;see&rdquo; the libraries needed to run the code, although they exist in the /lib folder. These libraries must be actually added to the build path in order for Eclipse to get the message that they *do* exist, and that it shouldn&rsquo;t freak out so much. </span></p><p class="c2"><span>Navigate to Brookwood &rarr; lib in the Package Explorer in Eclipse. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>On each file in /lib, Right Click &rarr; Build Path &rarr; Add to Build Path (note, you can select multiple files at once to do this, by holding down Shift or Ctrl. However, you cannot highlight a folder, like /htmlunit and add it to the build path)</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>After all the libraries have been added to the build path, the errors should disappear. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span>To run the scrapers from Eclipse, double-click on the &ldquo;Crawler&rdquo; file in the Package Explorer. Click the green &ldquo;Run&rdquo; button in the toolbar. Assuming that your MySQL database is set up correctly, the credentials are correctly entered in the &ldquo;Website.java&rdquo; code, and you are connected to the Internet, the script should run. </span></p><p class="c3 c2"><span></span></p><p class="c2"><span class="c12">Second way to run (not recommended, but definitely faster):</span><span>&nbsp;</span></p><p class="c2"><span>Open up a command line, navigate to Brookwood/bin</span></p><p class="c2"><span>In the bin folder, enter the command: </span></p><p class="c2"><span class="c6">java -classpath .;../lib/* com.bfplp.Crawler</span></p><p class="c2"><span>And on a Mac: </span></p><p class="c2"><span class="c6">java -cp .\:../lib/* com.bfplp.Crawler</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>Assuming everything is set up correctly (database, JDK, your Internet connection) they should run automatically, and begin populating the database with records.</span></p><p class="c3 c2"><span></span></p><h3 class="c2"><a name="h.7o38dqvx5ri1"></a><span>Search Page</span></h3><p class="c3 c2"><span></span></p><p class="c2"><span>To view the front end search page, add it to the &ldquo;www&rdquo; folder in your WAMP or MAMP installation. On Windows, this is located at C:\\wamp\www</span></p><p class="c2"><span>On a Mac, this is at /Applications/MAMP/htdocs</span></p><p class="c2"><span>Just drag and drop the file, and then navigate in your favorite browser to </span><span class="c0"><a class="c10" href="http://localhost/businessSearch.php">http://localhost/businessSearch.php</a></span></p><p class="c2"><span>As long as the database is populated, you should see a searchable listing of businesses. </span></p><p class="c2"><span>Note that you do not need to be connected to the Internet to use this search page -- businessSearch.php is accessing the database locally, and does not require an Internet connection.</span></p><h3 class="c2"><a name="h.mei2os3fxz4t"></a><span>Creating new Crawlers</span></h3><p class="c2"><span>To scrape a new page, add a new method in Website.java. This method should be something like:</span></p><p class="c2"><span>public static void domainnamecom(){}</span></p><p class="c2 c3"><span></span></p><p class="c2"><span>There are three main steps to each method:</span></p><ul class="c4 lst-kix_4tdagisqdy4o-0 start"><li class="c5 c2"><span>Looping through all search pages</span></li><li class="c5 c2"><span>Getting jsoup Documents for all individual business listing pages</span></li><li class="c5 c2"><span>Parsing these Documents to obtain information</span></li><li class="c5 c2"><span>Using &nbsp;writeToDB() to write that information to the database</span></li></ul><p class="c3 c2"><span></span></p><p class="c2"><span>Simplified, non-working, example of this process, on a business listing site called &ldquo;google.com&rdquo;: </span></p><p class="c2"><span class="c6 c7">public static void googlecom(){</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String googleUrl = &ldquo;https://www.google.com/search?q=businesses&amp;start=&rdquo;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Document googleDoc;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Document bizPage;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String title;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String description;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i = 0; true; i++){</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//This produces URLs for subsequent search pages</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;googleDoc = getUrl(googleUrl+i*10);</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(googleDoc.contains(&ldquo;No more search results&rdquo;)){</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//No more search results have been found</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elements listingURLs = googleDoc.select(&ldquo;.title a&rdquo;);</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Iterate through individual business pages</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(j = 0; j &lt; listingURLs.length; j++){</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bizPage = getUrl(listingURLs.get(i));</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title = bizPage.select(&ldquo;h1&rdquo;);</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description = bizPage.select(&ldquo;.description&rdquo;);</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//writeToDb actually takes 31 arguments that all need to be &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//populated (sometimes with an empty string or a 0). </span></p><p class="c11 c2 c15"><span class="c6 c7">//Omitting these additional variables for simplicity.</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writeToDb(title, description);</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><p class="c11 c2"><span class="c6 c7">}</span></p><p class="c2"><span class="c6 c7">}</span></p><p class="c3 c2"><span></span></p><p class="c2"><span>After the method is written, an additional &ldquo;if&rdquo; statement needs to be added to the start() method of Website.java:</span></p><p class="c2 c11"><span class="c6 c7">if(sitename == &quot;googlecom&quot;){</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;googlecom();</span></p><p class="c2"><span class="c6 c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></p><h3 class="c2"><a name="h.d09n3yi1ap9l"></a><span>Potential Future Directions</span></h3><ul class="c4 lst-kix_49tebd6fgwoa-0 start"><li class="c5 c2"><span>Better search page interface</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-1 start"><li class="c1"><span>The search page is functional, but currently a little bland. </span></li><li class="c1"><span>It would be nice to have sorting capabilities along columns, or the ability to pick and choose which columns/values are displayed.</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-0"><li class="c5 c2"><span>Adding better security to businessSearch.php</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-1"><li class="c1"><span>Currently, it would be unsafe to place businessSearch.php in a publically-accessible place -- there is no security built into this page (however, if nothing of value is placed on the public server, it may be acceptable to risk it)</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-0"><li class="c5 c2"><span>Moving the search page to an online location</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-1"><li class="c1"><span>Central database could be shared among multiple employees (this could also be accomplished by placing it on a local network)</span></li><li class="c1"><span>Could be accessed via mobile devices (would require building a responsive or mobile version of the search page)</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-0"><li class="c5 c2"><span>Set up cron jobs to run scrapers automatically. </span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-1"><li class="c1"><span>This should be achievable with the Windows Task Scheduler, or by setting up a cron job on Linux/Mac</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-0"><li class="c2 c5"><span>Keep track of when listings appear/are removed</span></li></ul><ul class="c4 lst-kix_49tebd6fgwoa-1"><li class="c1"><span>This could be achieved by performing a check in the &ldquo;writeToDB()&rdquo; method that attempts to look up the listing in the database based on its listing ID or URL. If it is not found, it will mark the date as when the listing &ldquo;first appeared.&rdquo; If it is found, it will update the date, or make some other mark that indicates that it is &ldquo;still current.&rdquo; Listings that have not marked as being &ldquo;current&rdquo; for some time may be periodically removed, or deactivated.</span></li></ul><p class="c3 c2"><span></span></p><p class="c3 c2"><span></span></p><p class="c3 c2"><span></span></p><p class="c3 c2"><span></span></p><p class="c3 c2"><span></span></p></body></html>